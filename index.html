<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Add a geocoder</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 0; width: 100%; }
#geocoder-container {
    position: absolute;
    top: 10px;
    left: 0;
    right: 0;
    width: 100%;
    padding: 0 10px;
    box-sizing: border-box;
}
.mapboxgl-ctrl-geocoder {
    width: 100%;
    max-width: none;
}
.map-overlay {
    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    position: absolute;
    width: 100%;
    bottom: 0;
    left: 0;
    padding: 10px;
    box-sizing: border-box;
}
.map-overlay .map-overlay-inner {
    background-color: #fff;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    border-radius: 3px;
    padding: 10px;
    margin-bottom: 10px;
}
.map-overlay-inner fieldset {
    border: none;
    padding: 0;
    margin: 0 0 10px;
}
.map-overlay-inner .layer-button {
    display: inline-block;
    padding: 8px 12px;
    margin: 2px;
    border: none;
    cursor: pointer;
    background-color: #f0f0f0;
    border-radius: 3px;
}
.map-overlay-inner .layer-button.selected {
    background-color: #007bff;
    color: white;
}
.map-overlay-inner button {
    display: inline-block;
    width: 36px;
    height: 20px;
    border: none;
    cursor: pointer;
    margin: 2px;
}
.map-overlay-inner button:focus {
    outline: none;
}
.map-overlay-inner button:hover {
    box-shadow: inset 0 0 0 3px rgba(0, 0, 0, 0.1);
}
</style>
</head>
<body>
<!-- Load the `mapbox-gl-geocoder` plugin. -->
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css" type="text/css">

<div id="map"></div>

<div id="geocoder-container"></div>

<div class="map-overlay top">
    <div class="map-overlay-inner">
        <fieldset>
            <label>Select layer</label>
            <div id="layer-buttons">
                <button class="layer-button" data-layer="water">Water</button>
                <button class="layer-button" data-layer="buildings">Buildings</button>
                <button class="layer-button" data-layer="parks">Parks</button>
                <button class="layer-button" data-layer="landuse">Land</button>
                <button class="layer-button" data-layer="road-primary">Road - Primary</button>
                <button class="layer-button" data-layer="road">Road</button>
            </div>
        </fieldset>
        <fieldset>
            <label>Choose a color</label>
            <div id="swatches"></div>
        </fieldset>
    </div>
</div>

<script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoia211bm96IiwiYSI6ImNsY3A3NDloaDA2bnozcGxiN2U1Y2I2bWIifQ.WY4_mVStBm5c9CjvWsVy3w';
    const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/kmunoz/clv912qkc00o301phcbmc6o5r',
        center: [-73.965400, 40.754651],
        zoom: 16.4
    });

    const geocoder = new MapboxGeocoder({
        accessToken: mapboxgl.accessToken,
        mapboxgl: mapboxgl
    });

    document.getElementById('geocoder-container').appendChild(geocoder.onAdd(map));

    const layerButtons = document.querySelectorAll('.layer-button');
    let selectedLayer = null;

    layerButtons.forEach(button => {
        button.addEventListener('click', () => {
            if (selectedLayer) {
                selectedLayer.classList.remove('selected');
            }
            button.classList.add('selected');
            selectedLayer = button;
        });
    });

    map.on('load', function() {
        map.addLayer({
            id: 'triangles',
            source: {
                type: 'vector',
                url: 'mapbox://examples.ckv9z0wgf5v7c27p7me2mf0l9-9wrve'
            },
            'source-layer': 'triangles',
            type: 'fill'
        });

        const swatches = document.getElementById('swatches');
        const colors = [
            '#eee', '#ddd', '#c4c4c4', '#ffffcc', '#a1dab4', '#41b6c4', '#2c7fb8', '#253494',
            '#fed976', '#feb24c', '#fd8d3c', '#f03b20', '#bd0026'
        ];

        colors.forEach(color => {
            const swatch = document.createElement('button');
            swatch.style.backgroundColor = color;
            swatch.addEventListener('click', () => {
                if (selectedLayer) {
                    map.setPaintProperty(selectedLayer.getAttribute('data-layer'), 'fill-color', color);
                }
            });
            swatches.appendChild(swatch);
        });
    });
</script>

</body>
</html>
